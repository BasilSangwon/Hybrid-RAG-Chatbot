<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Chatbot Admin Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary: #2563eb;
            --secondary: #475569;
            --accent: #7c3aed;
            --bg: #f8fafc;
            --surface: #ffffff;
            --border: #e2e8f0;
            --text: #1e293b;
            --text-sub: #64748b;
        }

        body {
            font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
            background-color: var(--bg);
            color: var(--text);
            margin: 0;
            padding: 20px;
            line-height: 1.5;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            background: var(--surface);
            padding: 20px 30px;
            border-radius: 16px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
        }

        .header h1 {
            margin: 0;
            font-size: 24px;
            color: var(--text);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .status-badge {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .status-badge.online {
            background: #dcfce7;
            color: #166534;
        }

        .status-badge.offline {
            background: #fee2e2;
            color: #991b1b;
        }

        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 24px;
        }

        .dashboard-section {
            margin-bottom: 40px;
        }

        .section-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 20px;
            padding-left: 10px;
            border-left: 4px solid var(--primary);
        }

        .section-title {
            font-size: 20px;
            font-weight: 700;
            color: var(--text);
        }

        .section-desc {
            font-size: 14px;
            color: var(--text-sub);
        }

        .card {
            background: var(--surface);
            border-radius: 16px;
            padding: 24px;
            border: 1px solid var(--border);
            box-shadow: 0 2px 4px -1px rgba(0, 0, 0, 0.05);
            transition: transform 0.2s;
        }

        .card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.05);
        }

        .card h2 {
            margin-top: 0;
            font-size: 18px;
            margin-bottom: 20px;
            color: var(--secondary);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .form-group {
            margin-bottom: 16px;
        }

        .form-label {
            display: block;
            font-size: 13px;
            font-weight: 600;
            color: var(--text-sub);
            margin-bottom: 6px;
        }

        input[type="text"],
        input[type="number"],
        textarea,
        select {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid var(--border);
            border-radius: 8px;
            font-size: 14px;
            box-sizing: border-box;
            transition: border-color 0.2s;
        }

        input:focus,
        textarea:focus,
        select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }

        .btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 10px 16px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            font-size: 14px;
            transition: all 0.2s;
        }

        .btn:hover {
            opacity: 0.9;
            transform: translateY(-1px);
        }

        .btn:disabled {
            background: #cbd5e1;
            cursor: not-allowed;
            transform: none;
        }

        .btn-sm {
            padding: 6px 12px;
            font-size: 12px;
        }

        .btn-full {
            width: 100%;
        }

        .btn-accent {
            background: var(--accent);
        }

        .btn-danger {
            background: #ef4444;
        }

        .btn-eval {
            background: #db2777;
        }

        .list-container {
            margin-top: 16px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            max-height: 300px;
            overflow-y: auto;
        }

        .list-item {
            background: #f1f5f9;
            padding: 12px;
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 14px;
        }

        .item-content {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .item-title {
            font-weight: 600;
        }

        .item-desc {
            font-size: 12px;
            color: var(--text-sub);
        }

        .tool-box {
            background: #eff6ff;
            border: 1px solid #dbeafe;
            padding: 16px;
            border-radius: 12px;
            margin-bottom: 20px;
        }

        .tool-title {
            font-size: 12px;
            font-weight: 700;
            color: var(--primary);
            text-transform: uppercase;
            margin-bottom: 10px;
            display: block;
        }

        .score-board {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .score-item {
            flex: 1;
            background: #fdf2f8;
            padding: 10px;
            border-radius: 8px;
            text-align: center;
            border: 1px solid #fce7f3;
        }

        .score-value {
            display: block;
            font-size: 20px;
            font-weight: 800;
            color: #db2777;
        }

        .score-label {
            font-size: 11px;
            color: #be185d;
        }

        .step-badge {
            background: var(--primary);
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
        }

        .db-stat-badge {
            font-size: 12px;
            padding: 4px 8px;
            border-radius: 12px;
            background: #e0f2fe;
            color: #0369a1;
        }

        .warning-text {
            color: #ef4444;
            font-size: 12px;
            font-weight: bold;
            margin-top: 5px;
        }

        .debug-result {
            margin-top: 10px;
            padding: 10px;
            background: #fff;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 12px;
            white-space: pre-wrap;
            max-height: 200px;
            overflow-y: auto;
        }

        /* [NEW] Chart & Table Styles */
        .chart-container {
            position: relative;
            height: 180px;
            width: 100%;
            margin-bottom: 20px;
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 13px;
        }

        .data-table th {
            background: #f1f5f9;
            padding: 8px;
            text-align: left;
            font-weight: 600;
            color: var(--text-sub);
            border-bottom: 1px solid var(--border);
        }

        .data-table td {
            padding: 8px;
            border-bottom: 1px solid var(--border);
            color: var(--text);
        }

        details {
            background: #f8fafc;
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 10px;
            margin-bottom: 15px;
        }

        details summary {
            cursor: pointer;
            font-size: 13px;
            font-weight: 600;
            color: var(--primary);
        }
    </style>
</head>

<body>
    <div class="header">
        <h1><span>ğŸ¤–</span>AI Chatbot Admin Dashboard</h1>
        <div id="server-status" class="status-badge offline">
            <span id="status-icon">â—</span><span id="status-text">ì—°ê²° ì‹œë„ ì¤‘...</span>
        </div>
    </div>

    <!-- Section 1: Configuration & Policy -->
    <section class="dashboard-section">
        <div class="section-header">
            <div class="step-badge">1</div>
            <div class="section-title">ì‹œìŠ¤í…œ ì„¤ì • ë° ì •ì±… (Configuration & Policy)</div>
            <div class="section-desc">AIì˜ í˜ë¥´ì†Œë‚˜ì™€ ë‹µë³€ ì§€ì¹¨ì„ ì„¤ì •í•©ë‹ˆë‹¤.</div>
        </div>
        <div class="dashboard-grid">
            <!-- Persona Config -->
            <div class="card">
                <h2>ğŸ­ Active Persona</h2>
                <div class="form-group">
                    <label class="form-label">Name</label>
                    <input type="text" id="p_name" placeholder="ì˜ˆ: ì¹œì ˆí•œ ìƒë‹´ì›">
                </div>
                <div class="form-group">
                    <label class="form-label">System Prompt</label>
                    <textarea id="p_prompt" rows="3" placeholder="ì˜ˆ: ë‹¹ì‹ ì€ ê³ ê°ì—ê²Œ í•­ìƒ ì¹œì ˆí•˜ê²Œ ì‘ëŒ€í•´ì•¼ í•©ë‹ˆë‹¤."></textarea>
                </div>
                <button onclick="addPersona()" class="btn btn-full">í˜ë¥´ì†Œë‚˜ ìƒì„±</button>
                <div class="list-container" id="personaList"></div>
            </div>

            <!-- Answer Guidelines (Moved from bottom) -->
            <div class="card">
                <h2>ğŸ“¢ ë‹µë³€ ì§€ì¹¨ (ê°€ì´ë“œë¼ì¸)</h2>
                <div class="form-group">
                    <label class="form-label">ìƒí™© (Context)</label>
                    <input type="text" id="fb_context" placeholder="ì˜ˆ: ê²½ìŸì‚¬ ì–¸ê¸‰ ì‹œ">
                </div>
                <div class="form-group">
                    <label class="form-label">ì§€ì¹¨ (Guideline)</label>
                    <textarea id="fb_guideline" placeholder="ì˜ˆ: ìš°ë¦¬ ì œí’ˆì˜ ì¥ì ë§Œ ì„¤ëª…í•  ê²ƒ."></textarea>
                </div>
                <button onclick="addFeedback()" class="btn btn-full" style="background:#ea580c; color:white;">ì§€ì¹¨
                    ë“±ë¡</button>
                <div class="list-container" id="feedbackList"></div>
            </div>
        </div>
    </section>

    <!-- Section 2: Knowledge Base Ingestion -->
    <section class="dashboard-section">
        <div class="section-header">
            <div class="step-badge" style="background: var(--accent);">2</div>
            <div class="section-title">ì§€ì‹ ë°ì´í„° í•™ìŠµ (Knowledge Base Ingestion)</div>
            <div class="section-desc">ë¬¸ì„œë¥¼ ì—…ë¡œë“œí•˜ê³  Vector ë° Graph DBë¥¼ êµ¬ì¶•í•©ë‹ˆë‹¤.</div>
        </div>
        <div class="dashboard-grid">
            <!-- Source Files -->
            <div class="card">
                <h2>ğŸ“‚ ì›ë³¸ ë¬¸ì„œ ê´€ë¦¬ (Source Files)</h2>
                <div class="tool-box" style="background: #f8fafc; border-color: #cbd5e1;">
                    <input type="file" id="pdfInput" accept=".pdf">
                    <button onclick="uploadPdf()" class="btn btn-full"
                        style="margin-top:10px; background:#475569; color:white;">PDF ì—…ë¡œë“œ</button>
                </div>
                <div class="list-container" id="fileList"></div>
            </div>

            <!-- Vector RAG Experiment -->
            <div class="card">
                <h2 style="color:#0284c7;">ğŸ§© Vector RAG (Basic) <span id="stat_vector"
                        class="db-stat-badge">Loading...</span></h2>
                <div class="chart-container"><canvas id="vectorChart"></canvas></div>
                <div id="vector_status_msg" class="warning-text" style="display:none;">âš ï¸ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤! ì„ë² ë”©ì„ ì‹¤í–‰í•´ì£¼ì„¸ìš”.
                </div>

                <div class="form-group">
                    <label class="form-label">ì‹¤í—˜ ì´ë¦„ (Experiment Name)</label>
                    <input type="text" id="vec_exp_name" placeholder="ë¹„ì›Œë‘ë©´ ì„¤ì •ê°’ì— ë”°ë¼ ìë™ ìƒì„±ë©ë‹ˆë‹¤">
                </div>
                <div style="display:flex; gap:10px;">
                    <div class="form-group" style="flex:1;">
                        <label class="form-label">Chunk Size</label>
                        <input type="number" id="vec_chunk_size" value="1000">
                    </div>
                    <div class="form-group" style="flex:1;">
                        <label class="form-label">Overlap</label>
                        <input type="number" id="vec_chunk_overlap" value="100">
                    </div>
                </div>

                <details>
                    <summary>âš™ï¸ ê³ ê¸‰ ì„¤ì • (Advanced)</summary>
                    <div class="form-group" style="margin-top:10px;">
                        <label class="form-label">Top-k (Retrieval Count)</label>
                        <input type="number" id="vec_top_k" value="5" min="1" max="50">
                    </div>
                </details>

                <button id="btnVector" onclick="runVectorIndex()" class="btn btn-full"
                    style="background:#0284c7; color:white;">âš¡ Vector DB ì„ë² ë”© ì‹œì‘</button>
                <button onclick="resetVectorDB()" class="btn btn-full btn-sm"
                    style="margin-top:8px; background:#fee2e2; color:#b91c1c; border:1px solid #fecaca;">ğŸ—‘ï¸ Vector
                    DB ì´ˆê¸°í™”</button>

                <div style="margin-top:20px;">
                    <div style="font-size:12px; font-weight:bold; color:#64748b; margin-bottom:5px;">Recent
                        Experiments</div>
                    <div style="overflow-x:auto;">
                        <table class="data-table" id="vectorTable">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Name</th>
                                    <th>Config</th>
                                    <th>Count</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td colspan="5">Loading...</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Graph RAG Experiment -->
            <div class="card" style="border-top: 4px solid var(--accent);">
                <h2 style="color:var(--accent);">ğŸ•¸ï¸ Graph RAG (Advanced) <span id="stat_graph" class="db-stat-badge"
                        style="background:#f3e8ff; color:#7c3aed;">Loading...</span></h2>
                <div class="chart-container"><canvas id="graphChart"></canvas></div>

                <div
                    style="background: #f5f3ff; border: 1px solid #ddd6fe; border-radius: 8px; padding: 12px; margin-bottom: 15px;">
                    <div
                        style="font-size: 11px; font-weight: bold; color: #7c3aed; margin-bottom: 4px; text-transform: uppercase;">
                        DBì— ì €ì¥ëœ ëª¨ë¸ë³„ ë°ì´í„° í˜„í™©</div>
                    <div id="current_graph_model_container">
                        <div style="text-align:center; color:#94a3b8; font-size:12px;">Loading stats...</div>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">ì‹¤í—˜ ì´ë¦„ (Experiment Name)</label>
                    <input type="text" id="graph_exp_name" placeholder="ë¹„ì›Œë‘ë©´ ì„¤ì •ê°’ì— ë”°ë¼ ìë™ ìƒì„±ë©ë‹ˆë‹¤">
                </div>
                <div class="form-group">
                    <label class="form-label" style="color:var(--accent);">Extractor LLM ì„ íƒ</label>
                    <select id="graph_llm_select" onchange="checkGraphModelStatus()">
                        <option>Loading models...</option>
                    </select>
                    <div id="model_learn_status" style="font-size:12px; margin-top:4px; font-weight:bold;"></div>
                </div>

                <div style="display:flex; gap:10px;">
                    <div class="form-group" style="flex:1;">
                        <label class="form-label">Chunk Size</label>
                        <input type="number" id="graph_chunk_size" value="2000">
                    </div>
                    <div class="form-group" style="flex:1;">
                        <label class="form-label">Overlap</label>
                        <input type="number" id="graph_chunk_overlap" value="200">
                    </div>
                </div>

                <details>
                    <summary>âš™ï¸ ê³ ê¸‰ ì„¤ì • (Advanced)</summary>
                    <div class="form-group" style="margin-top:10px;">
                        <label class="form-label">Temperature (0.0 ~ 1.0)</label>
                        <input type="range" id="graph_temp" min="0" max="1" step="0.1" value="0.0"
                            oninput="document.getElementById('temp_val').innerText=this.value">
                        <span id="temp_val" style="font-size:12px; font-weight:bold;">0.0</span>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Prompt Template (Optional)</label>
                        <textarea id="graph_prompt" rows="2" placeholder="ê¸°ë³¸ í”„ë¡¬í”„íŠ¸ ì‚¬ìš© ì‹œ ë¹„ì›Œë‘ì„¸ìš”."></textarea>
                    </div>
                </details>

                <div style="display:flex; gap:10px;">
                    <button id="btnGraph" onclick="runGraphIndex()" class="btn btn-full btn-accent" style="flex:2;">ğŸ—ï¸
                        êµ¬ì¶• ì‹œì‘ (ë°ì´í„° ì¶”ê°€)</button>
                    <button onclick="deleteGraphModel()" class="btn btn-full btn-danger"
                        style="flex:1; font-size:12px; border:1px solid #fecaca; background:#fee2e2; color:#b91c1c;">ğŸ—‘ï¸
                        ì„ íƒ ëª¨ë¸ ì‚­ì œ</button>
                </div>

                <div style="margin-top:20px;">
                    <div style="font-size:12px; font-weight:bold; color:#64748b; margin-bottom:5px;">Recent
                        Experiments</div>
                    <div style="overflow-x:auto;">
                        <table class="data-table" id="graphTable">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Name</th>
                                    <th>Config</th>
                                    <th>Count</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td colspan="5">Loading...</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Section 3: Evaluation & QA -->
    <section class="dashboard-section">
        <div class="section-header">
            <div class="step-badge" style="background: linear-gradient(135deg, #ec4899, #db2777);">3</div>
            <div class="section-title">í’ˆì§ˆ í‰ê°€ ë° ë°ì´í„°ì…‹ êµ¬ì¶• (Evaluation & QA)</div>
            <div class="section-desc">í‰ê°€ ë°ì´í„°ì…‹ì„ ê´€ë¦¬í•˜ê³  RAGAS ì„±ëŠ¥ì„ ì¸¡ì •í•©ë‹ˆë‹¤.</div>
        </div>

        <!-- [NEW] Shared Model Selector -->
        <div class="card" style="margin-bottom: 20px; border-left: 4px solid #db2777;">
            <div class="form-group" style="margin-bottom:0; display:flex; align-items:center; gap:10px;">
                <label class="form-label" style="color:#db2777; margin:0; white-space:nowrap;">ğŸ¤– ì‘ì—… ëª¨ë¸ ì„ íƒ (Base
                    LLM):</label>
                <select id="shared_model_select" style="border-color:#fbcfe8; flex:1; font-weight:bold;">
                    <option value="gemini-2.0-flash">Loading models...</option>
                </select>
                <button onclick="loadAvailableModels()" class="btn btn-sm" style="background:#fce7f3; color:#db2777;">ğŸ”„
                    ëª©ë¡ ê°±ì‹ </button>
            </div>
            <p style="font-size:12px; color:#be185d; margin-top:5px; margin-bottom:0;">
                â€» ì´ ëª¨ë¸ì€ <b>Q&A ìë™ ìƒì„±</b> ë° <b>RAGAS í‰ê°€(Judge)</b>ì— ê³µí†µìœ¼ë¡œ ì‚¬ìš©ë©ë‹ˆë‹¤.
            </p>
        </div>

        <div class="dashboard-grid" style="grid-template-columns: 1fr;">
            <!-- Golden Dataset Management -->
            <div class="card">
                <h2>ğŸ“ ì •ë‹µ ìºì‹œ ë° ë°ì´í„°ì…‹ êµ¬ì¶•</h2>

                <div
                    style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-bottom: 20px;">
                    <!-- Part A: Auto Generator -->
                    <div class="sub-card"
                        style="border:1px solid #e2e8f0; padding:20px; border-radius:16px; background:#f0f9ff;">
                        <div style="display:flex; align-items:center; gap:10px; margin-bottom:12px;">
                            <div style="background:#2563eb; color:white; padding:6px; border-radius:8px;">ğŸ¤–</div>
                            <h3 style="margin:0; font-size:16px; color:#1e40af;">AI ìë™ ìƒì„± (Auto)</h3>
                        </div>
                        <p style="font-size:13px; color:#64748b; margin-bottom:16px;">PDF ë¬¸ì„œë¥¼ ë¶„ì„í•˜ì—¬ ì˜ˆìƒ ì§ˆë¬¸ê³¼ ë‹µë³€ ì„¸íŠ¸ë¥¼ ìë™ìœ¼ë¡œ ëŒ€ëŸ‰
                            ìƒì‚°í•©ë‹ˆë‹¤.</p>

                        <div class="form-group">
                            <label class="form-label">ëŒ€ìƒ PDF íŒŒì¼</label>
                            <select id="qa_source_file" style="margin-bottom:10px;" onchange="updateFileInfo()">
                                <option value="">íŒŒì¼ ì„ íƒ...</option>
                            </select>
                        </div>
                        <div class="form-group" style="margin-bottom:12px;">
                            <label class="form-label">ìƒì„± ê°œìˆ˜</label>
                            <input type="number" id="qa_count" value="10" min="1" max="50" style="width:80px;"
                                onchange="updateFileInfo()" oninput="updateFileInfo()">
                            <div id="qa_token_info"
                                style="margin-top:8px; padding:10px; background:#e0f2fe; border-radius:6px; font-size:11px; color:#0369a1;">
                                ğŸ’¡ íŒŒì¼ì„ ì„ íƒí•˜ë©´ ì˜ˆìƒ í† í°ì´ í‘œì‹œë©ë‹ˆë‹¤.
                            </div>
                        </div>
                        <div id="qa_gen_buttons">
                            <button id="btnQAGen" onclick="generateAIQA()" class="btn btn-full"
                                style="background:#2563eb; box-shadow:0 4px 6px -1px rgba(37, 99, 235, 0.2);">
                                âš¡ Q&A ìë™ ìƒì„± ì‹œì‘
                            </button>
                        </div>
                        <div id="qa_gen_progress" style="display:none; text-align:center; padding:10px;">
                            <div style="color:#2563eb; font-weight:600;">â³ Q&A ìƒì„± ì¤‘...</div>
                            <button onclick="cancelQAGen()" class="btn btn-sm btn-danger" style="margin-top:8px;">
                                âŒ ì‘ì—… ì·¨ì†Œ
                            </button>
                        </div>
                    </div>

                    <!-- Part B: Manual Entry -->
                    <div class="sub-card"
                        style="border:1px solid #e2e8f0; padding:20px; border-radius:16px; background:#f0fdf4;">
                        <div style="display:flex; align-items:center; gap:10px; margin-bottom:12px;">
                            <div style="background:#059669; color:white; padding:6px; border-radius:8px;">âœï¸</div>
                            <h3 style="margin:0; font-size:16px; color:#166534;">ìˆ˜ë™ ì •ë‹µ ë“±ë¡ (Manual)</h3>
                        </div>
                        <p style="font-size:13px; color:#64748b; margin-bottom:16px;">AIê°€ ë†“ì¹  ìˆ˜ ìˆëŠ” ë””í…Œì¼ì´ë‚˜ ë²•ì  ê·œì • ë“±ì„ ì§ì ‘ ë“±ë¡í•˜ì—¬
                            ë³´ì™„í•©ë‹ˆë‹¤.</p>

                        <div class="form-group">
                            <input type="text" id="q_input" placeholder="Q. ì§ˆë¬¸ì„ ì…ë ¥í•˜ì„¸ìš”" style="margin-bottom:8px;">
                            <input type="text" id="a_input" placeholder="A. ì •ë‹µì„ ì…ë ¥í•˜ì„¸ìš”">
                        </div>
                        <button onclick="addAnswer()" class="btn btn-full"
                            style="background:#059669; box-shadow:0 4px 6px -1px rgba(5, 150, 105, 0.2);">
                            ğŸ’¾ ìˆ˜ë™ ë“±ë¡
                        </button>
                    </div>
                </div>

                <!-- Part C: Management Table -->
                <div class="sub-card">
                    <h3
                        style="margin-top:0; font-size:15px; color:#475569; display:flex; align-items:center; gap:6px; flex-wrap:wrap;">
                        <span>ğŸ“‹</span> ë“±ë¡ëœ ì§€ì‹ ëª©ë¡ (Knowledge Base)
                        <div style="margin-left:auto; display:flex; gap:5px; align-items:center;">
                            <input type="text" id="qa_search" placeholder="ê²€ìƒ‰..." onkeyup="filterAnswers()"
                                style="width:120px; font-size:12px; padding:4px 8px;">
                            <button onclick="loadAnswers()" class="btn btn-sm">ğŸ”„</button>
                            <button onclick="deleteAllAnswers()" class="btn btn-sm btn-danger">ğŸ—‘ï¸ ì „ì²´ì‚­ì œ</button>
                        </div>
                    </h3>
                    <div
                        style="overflow-x:auto; max-height: 250px; overflow-y: auto; border: 1px solid #e2e8f0; border-radius: 8px;">
                        <table class="data-table" id="qaTable">
                            <thead style="position: sticky; top: 0; background: #f8fafc; z-index: 1;">
                                <tr>
                                    <th style="width:50px;">ID</th>
                                    <th>Question</th>
                                    <th>Answer</th>
                                    <th style="width:70px;">Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td colspan="4" style="text-align:center; padding:20px; color:#94a3b8;">ë°ì´í„° ë¡œë”© ì¤‘...
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- RAGAS Evaluation -->
            <div class="card" style="border-top: 4px solid #db2777;">
                <h2>ğŸ“Š RAGAS ì„±ëŠ¥ ì„±ì í‘œ</h2>

                <div id="evalResult" style="display:none;">
                    <div style="display:grid; grid-template-columns: 1fr 1fr 1fr; gap:15px; margin-bottom:20px;">
                        <!-- Faithfulness -->
                        <div
                            style="text-align:center; padding:15px; background:#fdf2f8; border-radius:12px; border:1px solid #fce7f3;">
                            <div style="font-size:12px; color:#db2777; margin-bottom:5px;">Faithfulness</div>
                            <div class="score-value" id="score_faith" style="font-size:24px;">0.0</div>
                            <div style="font-size:10px; color:#be185d;">ì‹ ë¢°ë„</div>
                        </div>
                        <!-- Relevance -->
                        <div
                            style="text-align:center; padding:15px; background:#fdf2f8; border-radius:12px; border:1px solid #fce7f3;">
                            <div style="font-size:12px; color:#db2777; margin-bottom:5px;">Relevance</div>
                            <div class="score-value" id="score_rel" style="font-size:24px;">0.0</div>
                            <div style="font-size:10px; color:#be185d;">ê´€ë ¨ì„±</div>
                        </div>
                        <!-- Precision -->
                        <div
                            style="text-align:center; padding:15px; background:#fdf2f8; border-radius:12px; border:1px solid #fce7f3;">
                            <div style="font-size:12px; color:#db2777; margin-bottom:5px;">Precision</div>
                            <div class="score-value" id="score_prec" style="font-size:24px;">0.0</div>
                            <div style="font-size:10px; color:#be185d;">ì •í™•ë„</div>
                        </div>
                    </div>

                    <details open style="border:none; padding:0;">
                        <summary style="margin-bottom:10px;">ğŸ” ìƒì„¸ í‰ê°€ ë‚´ì—­ (Details)</summary>
                        <div class="list-container" id="evalDetails"
                            style="border:1px solid #fce7f3; background:#fff; border-radius:12px; padding:10px; max-height:300px; overflow-y:auto;">
                            <!-- Details populated by JS -->
                        </div>
                    </details>
                </div>

                <div id="evalPlaceholder"
                    style="text-align:center; padding:40px; color:#cbd5e1; border:2px dashed #e2e8f0; border-radius:12px;">
                    <div style="font-size:40px; margin-bottom:10px;">ğŸ“Š</div>
                    <div>ì•„ì§ í‰ê°€ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.<br>ìƒë‹¨ì—ì„œ ëª¨ë¸ ì„ íƒ í›„ 'í‰ê°€ ì‹œì‘'ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”.</div>
                    <button onclick="runEvaluation()" id="btnEval" class="btn"
                        style="margin-top:15px; background:#db2777; color:white;">
                        ğŸ“ í˜„ì¬ ëª¨ë¸ë¡œ í‰ê°€ ì‹œì‘ (Start Evaluation)
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- Section 4: Monitoring & Debugging -->
    <section class="dashboard-section">
        <div class="section-header">
            <div class="step-badge" style="background: #10b981;">4</div>
            <div class="section-title">ëª¨ë‹ˆí„°ë§ ë° ë””ë²„ê¹… (Monitoring & Debugging)</div>
            <div class="section-desc">ê²€ìƒ‰ ì—”ì§„ì„ í…ŒìŠ¤íŠ¸í•˜ê³  ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰ì„ í™•ì¸í•©ë‹ˆë‹¤.</div>
        </div>
        <div class="dashboard-grid">
            <!-- Search Debugger -->
            <div class="card">
                <h2>ğŸ” ê²€ìƒ‰ ë””ë²„ê±° (Search Debugger)</h2>
                <div class="tool-box" style="background: #fffbeb; border-color: #fcd34d;">
                    <div style="display:flex; gap:8px; margin-bottom:8px;">
                        <select id="debug_mode" style="width:120px;">
                            <option value="hybrid">Hybrid</option>
                            <option value="vector">Vector Only</option>
                            <option value="keyword">Keyword Only</option>
                        </select>
                        <input type="text" id="debug_query" placeholder="í…ŒìŠ¤íŠ¸í•  ì§ˆë¬¸ ì…ë ¥..." style="background:white;">
                    </div>
                    <button onclick="runSearchTest()" class="btn btn-full" style="background:#d97706; color:white;">ğŸš€
                        ê²€ìƒ‰ ì—”ì§„ ì„±ëŠ¥ í…ŒìŠ¤íŠ¸</button>
                    <div id="debugResult" class="debug-result"></div>
                </div>
            </div>

            <!-- Resource Monitoring -->
            <div class="card" style="border-top: 4px solid #10b981;">
                <h2 style="color:#059669;">ğŸ’° Token Usage & Cost</h2>
                <div class="score-board" style="background:#ecfdf5; margin-bottom:20px;">
                    <div class="score-item"><span class="score-label" style="color:#059669;">Total Cost
                            (USD)</span><span class="score-value" id="total_cost" style="color:#047857;">$0.0000</span>
                    </div>
                    <div class="score-item"><span class="score-label" style="color:#059669;">Total Input
                            Tokens</span><span class="score-value" id="total_input" style="color:#047857;">0</span>
                    </div>
                    <div class="score-item"><span class="score-label" style="color:#059669;">Total Output
                            Tokens</span><span class="score-value" id="total_output" style="color:#047857;">0</span>
                    </div>
                </div>
                <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:10px;">
                    <h3 style="font-size:14px; color:#334155; margin:0;">Recent Sessions</h3>
                    <button onclick="loadUsageStats()" class="btn btn-sm" style="background:#10b981; color:white;">ğŸ”„
                        Refresh</button>
                </div>
                <div class="list-container" id="usageList" style="max-height: 400px;">
                    <div style="text-align:center; color:#94a3b8; font-size:12px; padding:10px;">Loading...</div>
                </div>
            </div>
        </div>
    </section>

    <!-- Scripts -->
    <script src="js/admin/config.js?v=20251211"></script>
    <script src="js/admin/utils.js?v=20251211"></script>
    <script src="js/admin/personas.js?v=20251211"></script>
    <script src="js/admin/knowledge.js?v=20251211"></script>
    <script src="js/admin/evaluation.js?v=20251211"></script>
    <script src="js/admin/monitoring.js?v=20251211"></script>
    <script src="js/admin/main.js?v=20251211"></script>
</body>

</html>